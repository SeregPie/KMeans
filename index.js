!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("just-my-luck"),require("@seregpie/vector-math")):"function"==typeof define&&define.amd?define(["just-my-luck","@seregpie/vector-math"],t):(r="undefined"!=typeof globalThis?globalThis:r||self).KMeans=t(r.JustMyLuck,r.VectorMath)}(this,(function(r,t){"use strict";function n(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var e=n(r),a=n(t);function o(r){return function(r){if(Array.isArray(r))return i(r)}(r)||function(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}(r)||function(r,t){if(!r)return;if("string"==typeof r)return i(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(r,t)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function u(r){return Array.from({length:r})}function f(r,t){var n=0;return r.map(t).reduce((function(r,t,e){return t<r&&(r=t,n=e),r})),n}var c=Object.assign((function(r,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a.distance,m=void 0===i?c.distance:i,d=a.map,s=void 0===d?c.map:d,l=a.maxIterations,p=void 0===l?c.maxIterations:l,y=a.mean,v=void 0===y?c.mean:y,h=a.random,b=void 0===h?c.random:h,g=Number.isFinite(t);if(g?n=t:(t=Array.from(t),n=t.length),!n)return[];if(r=Array.from(r),1===n)return[r];var A,j=new e.default(b),k=r.map(s);A=g?j.pickCombination(k,n):t.map(s);for(var I=[],x=function(r){var t=!0;if(k.forEach((function(r,n){var e=f(A,(function(t){return m(r,t)}));e!==I[n]&&(I[n]=e,t=!1)})),t)return"break";var e=u(n).map((function(){return[]}));I.forEach((function(r,t){e[r].push(k[t])})),A=A.map((function(r,t){var n=e[t];return n.length&&(r=v.apply(void 0,o(n))),r}))},M=0;M<p;M++){var S=x();if("break"===S)break}var w=u(n).map((function(){return[]}));return I.forEach((function(t,n){w[t].push(r[n])})),w}),{distance:a.default.distance,map:function(r){return r},maxIterations:1024,mean:a.default.mean,random:Math.random});return c}));
