(function(c){'undefined'!=typeof module&&'undefined'!=typeof exports&&this===exports?module.exports=c({}):(this.almete=this.almete||{},c(this.almete))}).call(this,function(c){let d=function(n,o,p=0,q){let r=n.length;for(q=void 0===q?r:Math.min(q,r);p<q&&!(!1===o(n[p],p));)++p},e=function(n,o,p=0,q){let r=n.length;for(q=void 0===q?r:Math.min(q,r);--q>=p;)n[q]=o(q);return n},f=function(n,o){let p=Array(n.length);return d(n,(q,r)=>{p[r]=o(q,r)}),p},g=function(n,o){let p,q=Infinity;return d(n,(r,t)=>{let u=o(r,t);u<q&&(q=u,p=r)}),p},h=function(n,o){return f(n,(p,q)=>[p,o[q]])},j=function(n,o){let p=!0;return d(n,(q,r)=>{if(!o(q,r))return p=!1}),p},k=function(){return[]},m={maxIterations:1024,map:function(n){return n},isEqual:function(n,o){return j(n,(p,q)=>p===o[q])},distanceBetween:function(n,o){let p=0;return d(n,(q,r)=>{p+=Math.pow(q-o[r],2)}),Math.sqrt(p)},meanOf:function(n){let o=n.length;return f(n[0],(p,q)=>{return d(n,r=>{p+=r[q]},1),p/o})}};return c.KMeans=Object.assign(function(n,o,p){let{maxIterations:q,map:r,isEqual:t,distanceBetween:u,meanOf:w}=Object.assign({},m,p);if(1>q)return[];let x=n.length;if(1>x)return[];let y,z=n;if(Array.isArray(o)){if(y=o.length,1>y)return[];if(1===y)return[z.slice()];n=f(n,D=>r(D)),o=f(o,D=>r(D))}else{if(y=o,1>y)return[];if(1===y)return[z.slice()];if(y>=x){let D=Array(y);return e(D,E=>[z[E]],0,x),e(D,k,x),D}n=f(n,D=>r(D)),o=n.slice(0,y)}let A=h(z,n),B,C;do{if(B=f(o,D=>[[],[],D]),d(A,([D,E])=>{let[F,G]=g(B,([H,I,J])=>u(E,J));F.push(D),G.push(E)}),1>--q)break;C=!1,o=f(B,([D,E,F])=>{if(1>E.length)return F;let G=w(E);return t(F,G)||(C=!0),G})}while(C);return f(B,([D])=>D)},m)});