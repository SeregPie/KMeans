!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(n.almete=n.almete||{},n.almete.KMeans=r())}(this,function(){"use strict";var n=function(r,t,e){var u=Object.assign({},n,e),i=u.maxIterations,a=u.map,f=u.isEqual,o=u.distanceBetween,c=u.mean;if(i<1)return[];var s,m=r.length;if(m<1)return[];var p=r;if(Array.isArray(t)){if((s=t.length)<1)return[];if(1===s)return[p.slice()];r=r.map(function(n){return a(n)}),t=t.map(function(n){return a(n)})}else{if((s=t)<1)return[];if(1===s)return[p.slice()];if(s>=m)return p.map(function(n){return[n]});t=(r=r.map(function(n){return a(n)})).slice(0,s)}var l,h,v=function(n){for(var r=[],t=arguments.length-1;t-- >0;)r[t]=arguments[t+1];return n.map(function(n,t){return[n].concat(r.map(function(n){return n[t]}))})}(p,r);do{if(l=t.map(function(n){return[[],[],n]}),v.forEach(function(n){var r,t,e,u=n[0],i=n[1],a=(r=function(n){var r=n[2];return o(i,r)},e=1/0,l.forEach(function(n,u){var i=r(n,u);i<e&&(e=i,t=n)}),t),f=a[0],c=a[1];f.push(u),c.push(i)}),--i<1)break;h=!1,t=l.map(function(n){var r=n[1],t=n[2];if(r.length<1)return t;var e=c(r);return f(t,e)||(h=!0),e})}while(h);return l.map(function(n){return n[0]})};return Object.assign(n,{maxIterations:1024,map:function(n){return n},isEqual:function(n,r){return n.every(function(n,t){return n===r[t]})},distanceBetween:function(n,r){var t=0;return n.forEach(function(n,e){t+=Math.pow(n-r[e],2)}),Math.sqrt(t)},mean:function(n){var r=n.length;if(r>0){var t=n[0].map(function(){return 0});return n.forEach(function(n){n.forEach(function(n,e){t[e]+=n/r})}),t}}}),n});
