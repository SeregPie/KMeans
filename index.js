!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(n=n||self).KMeans=r()}(this,function(){"use strict";function n(){return[]}var r=function(t,e,o){void 0===o&&(o={});var u=o.centroid;void 0===u&&(u=r.centroid);var i=o.distance;void 0===i&&(i=r.distance);var a=o.map;void 0===a&&(a=r.map);var f,c,p=o.maxIterations;if(void 0===p&&(p=r.maxIterations),t=Array.from(t),"number"==typeof e){if(!e)return[];if(1===e)return[[].concat(t)];f=t.map(function(n){return a(n)}),c=function(n,r){for(var t=[],e=0;e<n;e++)t[e]=r(e);return t}(e,n),e=f.slice(0,e)}else{if(!(e=Array.from(e)).length)return[];if(1===e.length)return[[].concat(t)];f=t.map(function(n){return a(n)}),c=e.map(n),e=e.map(function(n){return a(n)})}for(var m=[],d=function(r){m.forEach(function(n,r){c[n].push(f[r])}),e=e.map(function(n,r){var t=c[r];return t.length&&(n=u(t)),n});var t=!0;if(f.forEach(function(n,r){var o=function(n,r){for(var t=0,e=r(n[t]),o=1,u=n.length;o<u;o++){var i=r(n[o]);i<e&&(e=i,t=o)}return t}(e,function(r){return i(n,r)});o!==m[r]&&(m[r]=o,t=!1)}),c=c.map(n),t)return"break"},s=0;s<p;s++){if("break"===d())break}return m.forEach(function(n,r){c[n].push(t[r])}),c};return Object.assign(r,{centroid:function(n){return n[0].map(function(r,t){return function(n){return n.reduce(function(n,r){return n+r})}(e=n.map(function(n){return n[t]}))/e.length;var e})},distance:function(n,r){return Math.hypot.apply(Math,n.map(function(n,t){return n-r[t]}))},map:function(n){return n},maxIterations:1024}),r});
