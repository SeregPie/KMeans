(function(a){"undefined"!=typeof module&&"undefined"!=typeof exports&&this===exports?module.exports=a({}):(this.almete=this.almete||{},a(this.almete))}).call(this,function(a){let b=function(a,b,c=0,d){let e=a.length;for(d=void 0===d?e:Math.min(d,e);c<d&&!1!==b(a[c],c);)++c},c=function(a,b,c=0,d){let e=a.length;for(d=void 0===d?e:Math.min(d,e);--d>=c;)a[d]=b(d);return a},d=function(a,c){let d=new Array(a.length);return b(a,(a,b)=>{d[b]=c(a,b)}),d},e=function(a,c){let d,e=1/0;return b(a,(a,b)=>{let f=c(a,b);f<e&&(e=f,d=a)}),d},f=function(a,b){return d(a,(a,c)=>[a,b[c]])},g=function(a,c){let d=!0;return b(a,(a,b)=>{if(!c(a,b))return d=!1}),d},h=function(){return[]},i={maxIterations:1024,map:function(a){return a},isEqual:function(a,b){return g(a,(a,c)=>a===b[c])},distanceBetween:function(a,c){let d=0;return b(a,(a,b)=>{d+=Math.pow(a-c[b],2)}),Math.sqrt(d)},meanOf:function(a){let c=a.length;return d(a[0],(d,e)=>{b(a,a=>{d+=a[e]},1);return d/c})}};return a.KMeans=Object.assign(function(a,g,j){let{maxIterations:maxIterations,map:map,isEqual:isEqual,distanceBetween:distanceBetween,meanOf:meanOf}=Object.assign({},i,j);if(maxIterations<=0)return[];let k=a.length;if(k<=0)return[];let l,m=a;if(Array.isArray(g)){if((l=g.length)<=0)return[];if(1===l)return[m.slice()];a=d(a,a=>map(a)),g=d(g,a=>map(a))}else{if((l=g)<=0)return[];if(1===l)return[m.slice()];if(l>=k){let a=new Array(l);return c(a,a=>[m[a]],0,k),c(a,h,k),a}a=d(a,a=>map(a)),g=a.slice(0,l)}let o,p,n=f(m,a);do{if(o=d(g,a=>[[],[],a]),b(n,([a,b])=>{let[c,d]=e(o,([a,c,d])=>distanceBetween(b,d));c.push(a);d.push(b)}),--maxIterations<=0)break;p=!1,g=d(o,([a,b,c])=>{if(b.length<=0)return c;let d=meanOf(b);isEqual(c,d)||(p=!0);return d})}while(p);return d(o,([a])=>a)},i)});