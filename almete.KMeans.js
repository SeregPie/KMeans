(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a.almete=a.almete||{},a.almete.KMeans=b())})(this,function(){"use strict";function a(a,b){if(0<a.length){var c=b(a[0],0,a);return a.reduce(function(d,e,f){var g=b(e,f,a);return c>g&&(c=g,d=e),d})}}function b(a,b){return a.map(function(a,c){return[a,b[c]]})}var c=function(d,e,f){var g=Object.assign({},c,f),h=g.maxIterations,i=g.map,j=g.isEqual,k=g.distanceBetween,l=g.mean;if(1>h)return[];var m=d.length;if(1>m)return[];var n,o=d;if(Array.isArray(e)){if(n=e.length,1>n)return[];if(1===n)return[o.slice()];d=d.map(function(a){return i(a)}),e=e.map(function(a){return i(a)})}else{if(n=e,1>n)return[];if(1===n)return[o.slice()];if(n>=m)return o.map(function(a){return[a]});d=d.map(function(a){return i(a)}),e=d.slice(0,n)}var p,q,r=b(o,d);do{if(p=e.map(function(a){return[[],[],a]}),r.forEach(function(b){var c=b[0],d=b[1],e=a(p,function(a){var b=a[2];return k(d,b)}),f=e[0],g=e[1];f.push(c),g.push(d)}),1>--h)break;q=!1,e=p.map(function(a){var b=a[1],c=a[2];if(1>b.length)return c;var d=l(b);return j(c,d)||(q=!0),d})}while(q);return p.map(function(a){var b=a[0];return b})};return Object.assign(c,{maxIterations:1024,map:function(a){return a},isEqual:function(a,b){return a.every(function(a,c){return a===b[c]})},distanceBetween:function(a,b){var c=Math.sqrt;return c(a.reduce(function(a,c,d){var e=Math.pow;return a+e(c-b[d],2)},0))},mean:function(a){var b=a.length;if(0<b){var c=a[0].map(function(){return 0});return a.forEach(function(a){a.forEach(function(a,d){c[d]+=a/b})}),c}}}),c});
