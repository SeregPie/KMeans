!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(n=n||self).KMeans=r()}(this,function(){"use strict";function n(){return[]}var r=function(t,e,u){void 0===u&&(u={});var a=u.distance;void 0===a&&(a=r.distance);var o=u.map;void 0===o&&(o=r.map);var i=u.maxIterations;void 0===i&&(i=r.maxIterations);var f,c,m=u.mean;if(void 0===m&&(m=r.mean),t=Array.from(t),"number"==typeof e){if(!e)return[];if(1===e)return[[].concat(t)];f=t.map(function(n){return o(n)}),c=function(n,r){for(var t=[],e=0;e<n;e++)t[e]=r(e);return t}(e,n),e=f.slice(0,e)}else{if(!(e=Array.from(e)).length)return[];if(1===e.length)return[[].concat(t)];f=t.map(function(n){return o(n)}),c=e.map(n),e=e.map(function(n){return o(n)})}for(var p=[],s=function(r){p.forEach(function(n,r){c[n].push(f[r])}),e=e.map(function(n,r){var t=c[r];return t.length&&(n=m(t)),n});var t=!0;if(f.forEach(function(n,r){var u=function(n,r){for(var t=0,e=r(n[t]),u=1,a=n.length;u<a;u++){var o=r(n[u]);o<e&&(e=o,t=u)}return t}(e,function(r){return a(n,r)});u!==p[r]&&(p[r]=u,t=!1)}),c=c.map(n),t)return"break"},v=0;v<i;v++){if("break"===s())break}return p.forEach(function(n,r){c[n].push(t[r])}),c};return Object.assign(r,{distance:function(n,r){return Math.hypot.apply(Math,n.map(function(n,t){return n-r[t]}))},map:function(n){return n},maxIterations:1024,mean:function(n){return n[0].map(function(r,t){return function(n){return n.reduce(function(n,r){return n+r})}(e=n.map(function(n){return n[t]}))/e.length;var e})}}),r});
