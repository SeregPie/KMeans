(function(a){'undefined'!=typeof module&&'undefined'!=typeof exports&&this===exports?module.exports=a():(this.almete=this.almete||{}).KMeans=a()}).call(this,function(){let a=function(k,m,n=0,o){let p=k.length;for(o=void 0===o?p:Math.min(o,p);n<o&&!1!==m(k[n],n);)++n},b=function(k,m,n=0,o){let p=k.length;for(o=void 0===o?p:Math.min(o,p);--o>=n;)k[o]=m(o);return k},c=function(k,m){let n=Array(k.length);return a(k,(o,p)=>{n[p]=m(o,p)}),n},d=function(k,m){let n,o=Infinity;return a(k,(p,q)=>{let r=m(p,q);r<o&&(o=r,n=p)}),n},e=function(k,m){return c(k,(n,o)=>[n,m[o]])},f=function(k,m){let n=!0;return a(k,(o,p)=>{if(!m(o,p))return n=!1}),n},g=function(){return[]},h={maxIterations:1024,map(k){return k},isEqual(k,m){return f(k,(n,o)=>n===m[o])},distanceBetween(k,m){let n=0;return a(k,(o,p)=>{n+=Math.pow(o-m[p],2)}),Math.sqrt(n)},meanOf(k){let m=k.length;return c(k[0],(n,o)=>{return a(k,p=>{n+=p[o]},1),n/m})}},j=function(k,m,n){let{maxIterations:o,map:p,isEqual:q,distanceBetween:r,meanOf:t}=Object.assign({},h,n);if(1>o)return[];let u=k.length;if(1>u)return[];let w,x=k;if(Array.isArray(m)){if(w=m.length,1>w)return[];if(1===w)return[x.slice()];k=c(k,B=>p(B)),m=c(m,B=>p(B))}else{if(w=m,1>w)return[];if(1===w)return[x.slice()];if(w>=u){let B=Array(w);return b(B,C=>[x[C]],0,u),b(B,g,u),B}k=c(k,B=>p(B)),m=k.slice(0,w)}let z,A,y=e(x,k);do{if(z=c(m,B=>[[],[],B]),a(y,([B,C])=>{let[D,E]=d(z,([,,F])=>r(C,F));D.push(B),E.push(C)}),1>--o)break;A=!1,m=c(z,([,B,C])=>{if(1>B.length)return C;let D=t(B);return q(C,D)||(A=!0),D})}while(A);return c(z,([B])=>B)};return Object.assign(j,h),j});