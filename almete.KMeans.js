(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a.almete=a.almete||{},a.almete.KMeans=b())})(this,function(){"use strict";function a(a,b){var c=b(a[0],0);return a.reduce(function(a,d,e){var f=b(d,e);return c>f&&(c=f,a=d),a})}function b(){return[]}var c=function(a,b){return a===b||!!(Array.isArray(a)&&Array.isArray(b)&&a.length===b.length)&&a.every(function(a,d){return c(a,b[d])})},d=function(e,f,g){var h=Object.assign({},d,g),j=h.maxIterations,k=h.map,l=h.distanceBetween,m=h.mean;if(1>e.length)return[];var n;if(Array.isArray(f)){if(1>f.length)return[];if(1===f.length)return[e.slice()];n=e.map(function(a){return k(a)}),f=f.map(function(a){return k(a)})}else{if(1>f)return[];if(1===f)return[e.slice()];if(f>=e.length)return e.map(function(a){return[a]});n=e.map(function(a){return k(a)}),f=n.slice(0,f)}for(var o,p=f,q=p.map(b),r=function(){var d=p.map(b);return n.forEach(function(b,c){var e=a(d,function(a,c){return l(b,p[c])});e.push(c)}),c(d,q)?"break":void(q=d,p=q.map(function(a,b){return 0<a.length?m(a.map(function(a){return n[a]})):f[b]}))},s=0;s<j&&(o=r(s),"break"!==o);s++);return q.map(function(a){return a.map(function(a){return e[a]})})};return Object.assign(d,{maxIterations:1024,map:function(a){return a},distanceBetween:function(a,b){var c=Math.sqrt;return c(a.reduce(function(a,c,d){var e=Math.pow;return a+e(c-b[d],2)},0))},mean:function(a){return a.map(function(b){return b.map(function(b){return b/a.length})}).reduce(function(a,b){return a.map(function(a,c){return a+b[c]})})}}),d});
